    
    <section class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="card-icon">
                            <span class="fa fa-users nav-icon"></span>
                        </div>
                        <div class="col-10">
                            <h3 class="card-title">{{ titulo }}</h3>
                        </div>
                    </div>
                </div>
                  <!-- /.card-body Regsitro de Personas-->
                  <div class="card-body" id="formularioregistros">
                    <form (ngSubmit)='guardarPersona()' [formGroup]="registerFormU" autocomplete="off" class="form-horizontal">
                      <div class="contenedor">
                        <div class="tipo-form">
    
                          <div class="row">
                            <div class="col-lg-4">
                              <mat-form-field class="example-form-field" appearance="legacy">
                                <!-- <mat-label>Tipo Identificación</mat-label> -->
                                <mat-select matNativeControl placeholder="Tipo Identificación" required formControlName='PE_IDENTIFICACION' (change)='cambioRol($event)'>
                                    <mat-option *ngFor="let rol of Roles " value="{{rol}}">
                                      {{rol}}
                                    </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                            <div class="col-lg-8">
                              <mat-form-field class="example-form-field" appearance="legacy">
                                <!-- <mat-label>Identificación</mat-label> -->
                                <input matInput type="text" id="identificacion" formControlName="PE_CEDULA" placeholder="Identificación" required minlength="13" maxlength="13" pattern="^[0-9]*$">
                                <button type="button" *ngIf="registerFormU.value.PE_CEDULA" matSuffix mat-icon-button aria-label="Clear" (click)="registerFormU.controls['PE_CEDULA'].setValue('');">
                                  <mat-icon>close</mat-icon>
                                </button>
                                <button type="button" *ngIf="registerFormU.value.PE_CEDULA" matSuffix mat-icon-button aria-label="search" (click)="obtenerIdentificacionPersona(registerFormU.value.PE_CEDULA);">
                                  <mat-icon>search</mat-icon>
                                </button>
                                <mat-error *ngIf="isValidField('PE_CEDULA')">
                                    {{ getErrorMessage('PE_CEDULA') }}
                                </mat-error>
                              </mat-form-field>
                            </div>
                          </div>
    
                        <div class="row">
                          <div class="col-lg-12">
                            <mat-form-field class="example-form-field" appearance="legacy">
                              <!-- <mat-label>Razón Social</mat-label> -->
                              <input matInput type="text" id="nombre" formControlName="PE_NOMBRE" placeholder={{placeHolder}} required (keyup)="registerFormU.controls['PE_NOMBRE'].setValue(registerFormU.value.PE_NOMBRE.toUpperCase());">
                              <button type="button" *ngIf="registerFormU.value.PE_NOMBRE" matSuffix mat-icon-button aria-label="Clear" (click)="registerFormU.controls['PE_NOMBRE'].setValue('');">
                                <mat-icon>close</mat-icon>
                              </button>
                              <mat-error *ngIf="isValidField('PE_NOMBRE')">
                                  {{ getErrorMessage('PE_NOMBRE') }}
                              </mat-error>
                            </mat-form-field>
                          </div>
                        </div>
    
                        <div class="row" *ngIf="registerFormU.value.PE_IDENTIFICACION == 'RUC'">
                          <div class="col-lg-12">
                            <mat-form-field class="example-form-field" appearance="legacy">
                              <!-- <mat-label>Nombre Comercial</mat-label> -->
                              <input matInput type="text" formControlName="PE_APELLIDO" placeholder="Nombre Comercial" (keyup)="registerFormU.controls['PE_APELLIDO'].setValue(registerFormU.value.PE_APELLIDO.toUpperCase());">
                              <button type="button" *ngIf="registerFormU.value.PE_APELLIDO" matSuffix mat-icon-button aria-label="Clear" (click)="registerFormU.controls['PE_APELLIDO'].setValue('');">
                                <mat-icon>close</mat-icon>
                              </button>
                              <mat-error *ngIf="isValidField('PE_APELLIDO')">
                                {{ getErrorMessage('PE_APELLIDO') }}
                            </mat-error>
                            </mat-form-field>
                          </div>
                        </div>
    
                        <div class="row">
                          <div class="col-lg-12">
                            <mat-form-field class="example-form-field" appearance="legacy">
                              <!-- <mat-label>Dirección</mat-label> -->
                              <input matInput type="text" formControlName="PE_DIRECCION" placeholder="Dirección" required (keyup)="registerFormU.controls['PE_DIRECCION'].setValue(registerFormU.value.PE_DIRECCION.toUpperCase());">
                              <button type="button" *ngIf="registerFormU.value.PE_DIRECCION" matSuffix mat-icon-button aria-label="Clear" (click)="registerFormU.controls['PE_DIRECCION'].setValue('');">
                                <mat-icon>close</mat-icon>
                              </button>
                              <mat-error *ngIf="isValidField('PE_DIRECCION')">
                                {{ getErrorMessage('PE_DIRECCION') }}
                            </mat-error>
                            </mat-form-field>
                          </div>
                        </div>
    
                        <div class="row">
                          <div class="col-lg-6">
                            <mat-form-field class="example-form-field" appearance="legacy">
                              <!-- <mat-label>Teléfono Convencional</mat-label> -->
                              <input matInput type="text" formControlName="PE_TELEFONO1" placeholder="Teléfono Convencional" >
                              <button type="button" *ngIf="registerFormU.value.PE_TELEFONO1" matSuffix mat-icon-button aria-label="Clear" (click)="registerFormU.controls['PE_TELEFONO1'].setValue('');">
                                <mat-icon>close</mat-icon>
                              </button>
                              <mat-error *ngIf="isValidField('PE_TELEFONO1')">
                                {{ getErrorMessage('PE_TELEFONO1') }}
                            </mat-error>
                            </mat-form-field>
                          </div>
                          <div class="col-lg-6">
                            <mat-form-field class="example-form-field" appearance="legacy">
                              <!-- <mat-label>Celular</mat-label> -->
                              <input matInput type="text" formControlName="PE_FAX" placeholder="Celular" required>
                              <button type="button" *ngIf="registerFormU.value.PE_FAX" matSuffix mat-icon-button aria-label="Clear" (click)="registerFormU.controls['PE_FAX'].setValue('');">
                                <mat-icon>close</mat-icon>
                              </button>
                              <mat-error *ngIf="isValidField('PE_FAX')">
                                {{ getErrorMessage('PE_FAX') }}
                            </mat-error>
                            </mat-form-field>
                          </div>
                        </div>
    
                        <div class="row">
                          <div class="col-lg-6">
                            <mat-form-field class="example-form-field" appearance="legacy">
                              <mat-label>Ciudad</mat-label>
                                <mat-select matNativeControl required formControlName='PE_CIUDADNAC' (change)='cambioCiudad($event)'>
                                  <mat-option *ngFor="let ciudad of Ciudades" [value]="ciudad.SC_CODIGO">
                                    {{ ciudad.SC_DESCRIPCION }}
                                  </mat-option>
                                </mat-select>
                            </mat-form-field>
                          </div>
                          <div *ngIf="editar" class="col-lg-6">
                            <mat-slide-toggle class="togglebutton" formControlName="PE_ESTADO">Activar Persona.</mat-slide-toggle>
                          </div>
                        </div>
    
                        <div class="row">
                            <div class="col-lg-12">
                              <mat-form-field class="example-form-field" appearance="legacy">
                                <mat-chip-list #chipList aria-label="Seleccione emails" formArrayName="PE_EMAIL">
                                  <mat-chip [color]="(email.invalid)?'warn':''" *ngFor="let email of emails" 
                                  [selectable]="true" [removable]="removable" (removed)="remove(email)" selected required>
                                    {{email.name}}
                                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon> 
                                  </mat-chip>
                                  <input placeholder="Nuevo email..."
                                        [matChipInputFor]="chipList"
                                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                        [matChipInputAddOnBlur]="addOnBlur"
                                        (matChipInputTokenEnd)="add($event)">
                                </mat-chip-list>
                                <mat-error *ngIf="emailField!.hasError('incorrectEmail')">
                                  Al menos un email no es válido
                                </mat-error>
                              </mat-form-field>
                            </div>
                        </div>
                      </div>
    
                        <div class="tipo">
                          <div class="row">
                            <div class="col-lg-12" style="margin-bottom: 25px;">
                              <mat-label>Tipo de Personas</mat-label>
                              <mat-divider></mat-divider>
                              <br>
                              <div class="row" >
                                <div class="col-6">
                                  <div class="row" >
                                    <div class="col-2">
                                      <mat-checkbox class="example-margin" formControlName="PE_TIPOC" labelPosition="after" >
                                      </mat-checkbox>
                                    </div>
                                    <div class="col-10" style="text-align: left;">
                                      <mat-label>
                                       Cliente
                                      </mat-label>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-6">
                                  <div class="row" >
                                    <div class="col-2">
                                      <mat-checkbox class="example-margin" formControlName="PE_TIPOP" labelPosition="after" >
                                      </mat-checkbox>
                                    </div>
                                    <div class="col-10" style="text-align: left;">
                                      <mat-label>
                                        Proveedor
                                      </mat-label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="row" style="text-align: left;">
                                <div class="col-6">
                                  <div class="row" >
                                    <div class="col-2">
                                      <mat-checkbox class="example-margin" formControlName="PE_TIPOT" labelPosition="after" >
                                      </mat-checkbox>
                                    </div>
                                    <div class="col-10" style="text-align: left;">
                                      <mat-label>
                                        Transportista
                                      </mat-label>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-6">
                                  <div class="row" >
                                    <div class="col-2">
                                      <mat-checkbox class="example-margin" formControlName="PE_TIPOO" labelPosition="after" >
                                      </mat-checkbox>
                                    </div>
                                    <div class="col-10" style="text-align: left;">
                                      <mat-label>
                                        Otros
                                      </mat-label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
    
                          <br>
    
                          <div class="row">
                            <div class="col-lg-12">
                              <mat-label>Condiciones de Pago</mat-label>
                              <mat-divider></mat-divider>
                              <br>
                              <div class="row">
                                <div class="col-6">
                                  <mat-form-field class="example-form-field" appearance="legacy">
                                    <mat-label>Término</mat-label>
                                    <mat-select matNativeControl required formControlName='PE_FPAGO' (change)='cambioTermino($event)'>
                                        <mat-option *ngFor="let termino of Terminos " value="{{termino}}">
                                          {{termino}}
                                        </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                                <div class="col-6">
                                  <mat-form-field class="example-form-field" appearance="legacy">
                                    <mat-label>Plazo</mat-label>
                                    <mat-select matNativeControl required formControlName='PE_PLAZO' (change)='cambioPlazo($event)'>
                                      <mat-option value="0">0 Días</mat-option>
                                      <mat-option *ngFor="let plazo of Plazos" [value]="plazo.PLZ_CODI">
                                        {{ plazo.PLZ_DESCRIP }}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                              </div>
                            </div>
                          </div>
                      </div>
    
                        <div class="tipo-botones">
                            <button class="botones-form" mat-flat-button color="warn" (click)="cancelarform() " type="button" >
                              <mat-icon>cancel</mat-icon> Cancelar
                            </button>
                            <button mat-flat-button color="primary" type="submit"  >
                              <mat-icon>save</mat-icon> Guardar
                            </button>
                        </div>
                      </div>
                    </form>
                  </div>        
              </div>
              <!-- /.card -->
            </div>
          </div>
        </div>
      </section>

